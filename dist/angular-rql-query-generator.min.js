/*!
 * angular-rql-query-generator - v0.3.0
 * https://github.com/graviphoton/angular-rql-query-generator#readme

 * License: GPL-3.0
 * Date: 2016-01-27
 */
"use strict";angular.module("angular-rql-query-generator",[]).factory("RqlQuery",["$log",function(a){function b(){this.queryString=""}function c(){g.forEach(function(a){"function"!=typeof b.prototype[a]&&(b.prototype[a]=function(b,c){var g=f(this.queryString);return g.queryString+=a+"("+e(b)+","+d(c)+")&",g})}),h.forEach(function(a){"function"!=typeof b.prototype[a]&&(b.prototype[a]=function(b,c){var g=f(this.queryString);return g.queryString+=a+"("+e(b)+",("+c.map(d).join(",")+"))&",g})}),i.forEach(function(a){if("function"!=typeof b.prototype[a]){var c=[];b.prototype[a+"Start"]=function(){var b=f(this.queryString);return c.push(b.queryString.length),b.queryString+=a+"(",b},b.prototype[a+"End"]=function(){var b=f(this.queryString),d=c[c.length-1],e=b.queryString.substr(d,b.queryString.length-d-1);return e=e===a?"":e.replace(/&/g,",")+")&",b.queryString=b.queryString.substr(0,d)+e,c.splice(-1,1),b}}})}function d(a){return"string"!=typeof a?a:encodeURIComponent(a).replace(/[\-_\+\.~!\\'\*\(\)]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function e(a){return encodeURIComponent(a).replace(/[\-_\+~!\\'\*\(\)]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function f(a){var c=new b;return c.queryString=a,c}var g=["eq","ne","lt","gt","le","ge"],h=["in","out"],i=["and","or","not"];return b.prototype.toString=function(){return this.queryString.substr(0,this.queryString.length-1)},b.prototype.sort=function(){for(var a=f(this.queryString),b="sort(",c=0;c<arguments.length;c++){var d=arguments[c].substr(0,1),g=arguments[c].substr(1,arguments[c].length);b+=d+e(g)+","}return a.queryString+=b.substr(0,b.length-1)+")&",a},b.prototype.select=function(){for(var a=f(this.queryString),b="select(",c=0;c<arguments.length;c++)b+=e(arguments[c])+",";return a.queryString+=b.substr(0,b.length-1)+")&",a},b.prototype.like=function(a,b,c){var g=f(this.queryString),h=c?"*":"";return g.queryString+="like("+e(a)+","+h+d(b)+h+")&",g},b.prototype.limit=function(b,c){if(isNaN(b)||c&&isNaN(c))return a.warn("Warning: limit("+b+","+c+") is not allowed - skipping!"),this;var d=f(this.queryString),e=c?","+c:"";return d.queryString+="limit("+b+e+")&",d},b.prototype.elemMatchStart=function(a){var b=f(this.queryString);return b.queryString+="elemMatch("+a+",",b},b.prototype.elemMatchEnd=function(){var a=f(this.queryString);return a.queryString=a+")&",a},c(),b}]);